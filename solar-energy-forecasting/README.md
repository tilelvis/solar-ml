# Solar Energy Forecasting Pipeline – From Data to Deployment

## 1. Project Overview

This project demonstrates a complete, end-to-end machine learning pipeline for forecasting daily solar energy generation. In an era where renewable energy is critical, accurately forecasting solar power is essential for managing energy grids, optimizing storage, and making informed decisions in the energy market.

This portfolio project showcases the full ML lifecycle:
- **Data Ingestion & Generation**: Creating a realistic, synthetic dataset for model training.
- **Data Processing**: Cleaning data and performing feature engineering.
- **Exploratory Data Analysis (EDA)**: Visualizing and understanding the data.
- **Model Training & Evaluation**: Comparing multiple ML models to find the best performer.
- **Model Deployment**: Deploying the best model in an interactive web application using Streamlit.

## 2. Repository Structure

The project is organized into the following directories:

```
solar-energy-forecasting/
├── app/
│   └── app.py              # The Streamlit web application script
├── data/
│   ├── solar_panel_data.csv        # Raw synthetic data
│   └── solar_panel_data_processed.csv # Processed data with engineered features
├── models/
│   └── best_forecasting_model.joblib # The saved, best-performing model
├── notebooks/
│   ├── 01_eda_and_preprocessing.py # Script for EDA and feature engineering
│   └── 02_model_training.py      # Script for model training and evaluation
├── src/
│   └── data_generation.py    # Script to generate the synthetic dataset
├── README.md
└── requirements.txt
```

## 3. Dataset

The project uses a synthetic dataset generated by the script in `src/data_generation.py`. This was chosen to ensure reproducibility without dependency on external APIs or dataset access credentials.

The dataset simulates hourly sensor readings from a solar panel installation over two years and includes the following features:
- **`timestamp`**: The hour of the reading.
- **`temperature`**: The ambient temperature in Celsius.
- **`irradiance`**: The amount of solar radiation in W/m². This is the primary driver of energy generation.
- **`wind_speed`**: The wind speed in m/s.
- **`energy_output`**: The target variable, representing the energy generated in kWh for that hour.

## 4. ML Pipeline Explained

### 4.1. Data Ingestion & Preprocessing
The pipeline begins by generating the synthetic dataset. This data is then loaded and prepared for modeling.

### 4.2. Exploratory Data Analysis (EDA)
EDA is performed to understand the relationships between the weather features and the energy output. Key insights from the EDA show a strong positive correlation between `irradiance` and `energy_output`, as expected.

### 4.3. Feature Engineering
To improve model performance, several new features are engineered from the base data:
- **Time-based features**: `month`, `day_of_week`, and `hour` are extracted from the timestamp to capture cyclical patterns.
- **Lag features**: The energy output from previous hours (e.g., 1, 3, 6, 24 hours ago) are included as features.
- **Rolling averages**: Rolling means of `temperature` and `irradiance` are calculated over different time windows (e.g., 3, 6, 12, 24 hours) to smooth out short-term fluctuations.

### 4.4. Model Training & Evaluation
Three different regression models were trained and compared:
- Linear Regression
- Random Forest Regressor
- XGBoost Regressor

The models were evaluated using the following metrics on a time-based test set (the last 3 months of data):
- **Mean Absolute Error (MAE)**
- **Root Mean Squared Error (RMSE)**
- **R-squared (R²)**

## 5. Results

The models performed as follows on the test set:

| Model             | MAE    | RMSE   | R²     |
|-------------------|--------|--------|--------|
| Linear Regression | 0.0328 | 0.0420 | 0.8325 |
| Random Forest     | 0.0336 | 0.0429 | 0.8256 |
| XGBoost           | 0.0343 | 0.0443 | 0.8135 |

Interestingly, on this synthetic dataset, the **Linear Regression** model performed the best, likely due to the relatively simple relationships defined in the data generation script. It was selected as the final model and saved.

## 6. How to Run the Project

Follow these steps to run the forecasting dashboard on your local machine.

### 6.1. Prerequisites
- Python 3.8+
- `pip`

### 6.2. Setup and Installation
1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    cd solar-energy-forecasting
    ```

2.  **Create a virtual environment (recommended):**
    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows, use `venv\Scripts\activate`
    ```

3.  **Install the required packages:**
    ```bash
    pip install -r requirements.txt
    ```

### 6.3. Running the Pipeline
If you wish to regenerate the data and retrain the model, run the scripts in order:
```bash
# 1. Generate the data
python src/data_generation.py

# 2. Perform EDA and create the processed data file
python notebooks/01_eda_and_preprocessing.py

# 3. Train the model and save it
python notebooks/02_model_training.py
```

### 6.4. Launch the Streamlit Dashboard
To start the interactive dashboard, run the following command from the project's root directory:
```bash
streamlit run app/app.py
```
Open your web browser and navigate to the local URL provided by Streamlit.
